1. 如果是偏向锁

    1.1 检查当前mark word中记录是否是当前线程id，如果是当前线程则获得偏向锁执行同步代码块

    1.2 如果不是当前线程，cas操作替换线程id，替换成功则获得偏向锁，替换失败锁撤销升级轻量级锁
2. 如果是轻量级锁

    轻量级锁对于当前线程，分配栈帧记录lock_record，对象头mark word 复制到线程栈帧的锁记录

3. 重量级锁

    cas自旋达到一定次数升级为重量级锁（多个线程竞争锁）