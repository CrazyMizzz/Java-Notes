# 微服务常见面试题

## 为什么要网关？

微服务下一个系统被拆分为多个服务，但是像 安全认证，流量控制，日志，监控等功能是每个服务都需要的，没有网关的话，我们就需要在每个服务中单独实现，这使得我们做了很多重复的事情并且没有一个全局的视图来统一管理这些功能。

综上：一般情况下，网关一般都会提供请求转发、安全认证（身份/权限认证）、流量控制、负载均衡、容灾、日志、监控这些功能。

上面介绍了这么多功能实际上网关主要做了一件事情：请求过滤 。权限校验、流量控制这些都可以通过过滤器实现，请求转也是通过过滤器实现的。

## 限流的算法有哪些？

- 固定窗口计数器算法
- 滑动窗口计数器算法
- 漏桶算法
- 令牌桶算法

## Eureka如何承载千万级访问

1. 精妙的注册表存储结构

    一句话概括：维护注册表、拉取注册表、更新心跳时间，全部发生在内存里！这是Eureka Server非常核心的一个点。

2. 优秀的多级缓存机制

    - 首先从ReadOnlyCacheMap里查缓存的注册表。
    - 若没有，就找ReadWriteCacheMap里缓存的注册表。
    - 如果还没有，就从内存中获取实际的注册表数据。

3. 适当的请求频率

    Eureka通过设置适当的请求频率（拉取注册表30秒间隔，发送心跳30秒间隔），可以保证一个大规模的系统每秒请求Eureka Server的次数在几百次。


